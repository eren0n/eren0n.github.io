<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YTÃœ - Enerji YÃ¶netimi SÄ±navÄ± (BÃ¶lÃ¼m 3)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.tailwindcss.com?plugins=typography"></script>
    <script src="translations.js"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        /* Ã–zel kaydÄ±rma Ã§ubuÄŸu */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #f1f1f1; }
        ::-webkit-scrollbar-thumb { background: #1e3a8a; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #1e40af; }

        /* SÄ±nav sonuÃ§ stilleri */
        .correct-answer-label {
            background-color: #dcfce7; /* green-100 */
            border: 1px solid #16a34a; /* green-600 */
            color: #15803d; /* green-700 */
            font-weight: bold;
        }
        .wrong-answer-label {
            background-color: #fee2e2; /* red-100 */
            border: 1px solid #dc2626; /* red-600 */
            color: #b91c1c; /* red-700 */
            text-decoration: line-through;
        }
    </style>
</head>
<body class="bg-slate-50 min-h-screen text-slate-800">

    <header class="bg-white border-b border-gray-200 sticky top-0 z-50 shadow-sm">
        <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 h-20 flex justify-between items-center">
            <div class="flex items-center gap-4">
                <div class="w-12 h-12 bg-blue-900 rounded-full flex items-center justify-center text-white font-bold text-xl shadow-md">
                    YTÃœ
                </div>
                <div>
                    <h1 class="text-lg sm:text-xl font-bold text-blue-900 leading-tight" data-translate="siteTitle" data-section="common">AkÄ±llÄ± Evler ve Enerji YÃ¶netimi</h1>
                    <p class="text-xs sm:text-sm text-gray-500">BÃ¶lÃ¼m 3 SÄ±navÄ±</p>
                </div>
            </div>
            <div class="flex items-center gap-4">
                <button id="lang-switch-btn" class="px-3 py-2 bg-blue-50 hover:bg-blue-100 rounded-lg transition-colors duration-200 border border-blue-200" aria-label="Dil deÄŸiÅŸtir">
                    <span class="text-sm font-semibold">ğŸ‡¬ğŸ‡§ EN</span>
                </button>
                <div class="hidden sm:block text-right">
                <span class="block text-sm font-semibold text-blue-800" data-translate="prepareForExam" data-section="common">SÄ±nava HazÄ±rlan</span>
                <span class="block text-xs text-gray-500" data-translate="courseNotesSeries" data-section="common">Ders Ã–zeti Serisi</span>
            </div>
        </div>
    </header>

    <main class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-10">
        
        <div class="bg-white rounded-xl shadow-sm border border-gray-100 p-8 mb-10">
            <h2 class="text-2xl font-bold text-gray-800 mb-4">BÃ¶lÃ¼m 3: DeÄŸerlendirme SÄ±navÄ±</h2>
            <p class="text-gray-600 leading-relaxed">
                Bu sÄ±nav, "Enerji KaynaklarÄ± ve Hizmet Bedelleri (Tarifeler)" (3.pdf) konusundaki bilginizi Ã¶lÃ§mek iÃ§in hazÄ±rlanmÄ±ÅŸtÄ±r. 
                15 adet Ã§oktan seÃ§meli sÃ¶zel soru bulunmaktadÄ±r. BaÅŸarÄ±lar!
            </p>
        </div>

        <form id="quiz-form">
            <div id="quiz-container" class="space-y-10">
                </div>

            <div class="mt-12 text-center">
                <button type="submit" id="submit-btn" class="bg-blue-800 text-white font-bold py-3 px-10 rounded-lg shadow-lg hover:bg-blue-700 transition-colors duration-300" data-translate="finishExam" data-section="quiz">SÄ±navÄ± Bitir</button>
            </div>
        </form>

        <div id="results-container" class="hidden bg-white rounded-xl shadow-lg border border-gray-100 p-8 mb-10 mt-12">
            </div>

    </main>

    <footer class="bg-blue-900 text-blue-100 py-8 mt-12">
        <div class="max-w-6xl mx-auto px-4 text-center">
            <p class="text-sm" data-translate="footer.copyright" data-section="common">&copy; 2025 eren0n. TÃ¼m haklarÄ± saklÄ±dÄ±r.</p>
            <p class="text-xs mt-2 opacity-60" data-translate="footer.goodLuck" data-section="common">SÄ±navÄ±nÄ±zda BaÅŸarÄ±lar.</p>
        </div>
    </footer>

    <script>
        // Bilingual Quiz Data (Chapter 3: Electric Costs and Tariffs)
        const quizDataBilingual = {
            tr: [
                {
                    id: 1,
                    question: "1972-2006 yÄ±llarÄ± arasÄ±ndaki verilere gÃ¶re en ucuz enerji kaynaÄŸÄ± olarak kalan hangisidir?",
                    options: [
                        "KÃ¶mÃ¼r (Coal)",
                        "DoÄŸal Gaz (Natural Gas)",
                        "Petrol ÃœrÃ¼nleri (Petroleum Products)",
                        "Elektrik (Electricity)"
                    ],
                    correctAnswer: "KÃ¶mÃ¼r (Coal)"
                },
                {
                    id: 2,
                    question: "'DaÄŸÄ±tÄ±k Enerji KaynaklarÄ±' (Distributed Energy Resources) nasÄ±l tanÄ±mlanÄ±r?",
                    options: [
                        "Sadece bÃ¼yÃ¼k barajlarda Ã¼retilen enerji",
                        "DaÄŸÄ±tÄ±m ÅŸebekesine veya tÃ¼keticinin sayaÃ§ tarafÄ±na baÄŸlanan enerji kaynaklarÄ±",
                        "Sadece fosil yakÄ±tlardan elde edilen enerji",
                        "Ãœlkeler arasÄ± taÅŸÄ±nan enerji hatlarÄ±"
                    ],
                    correctAnswer: "DaÄŸÄ±tÄ±m ÅŸebekesine veya tÃ¼keticinin sayaÃ§ tarafÄ±na baÄŸlanan enerji kaynaklarÄ±"
                },
                {
                    id: 3,
                    question: "AÅŸaÄŸÄ±dakilerden hangisi 'Yeni Nesil' (New Generation) bir DaÄŸÄ±tÄ±k Enerji KaynaÄŸÄ± (DER) Ã¶rneÄŸidir?",
                    options: [
                        "MikrotÃ¼rbin (Microturbine)",
                        "Gaz TÃ¼rbini (Gas Turbine)",
                        "GÃ¼neÅŸ (Solar)",
                        "Hepsi"
                    ],
                    correctAnswer: "GÃ¼neÅŸ (Solar)"
                },
                {
                    id: 4,
                    question: "Elektrik tedarikÃ§ileri iÃ§in tarifeleri belirlerken tipik olarak en yÃ¼ksek maliyet kategorisi hangisidir?",
                    options: [
                        "Ä°letim ve daÄŸÄ±tÄ±m sistemleri",
                        "Ä°dari maliyetler (maaÅŸlar, sigorta)",
                        "YakÄ±t maliyetleri",
                        "Santralin iÅŸletme maliyeti (Generation plant operation)"
                    ],
                    correctAnswer: "Santralin iÅŸletme maliyeti (Generation plant operation)"
                },
                {
                    id: 5,
                    question: "TedarikÃ§iler, elektrik maliyetlerini paylaÅŸtÄ±rmak iÃ§in genellikle hangi Ã¼Ã§ ana mÃ¼ÅŸteri tipini dikkate alÄ±r?",
                    options: [
                        "Evsel, Ticari ve EndÃ¼striyel",
                        "Devlet, Ã–zel SektÃ¶r ve TarÄ±msal",
                        "Åehir, KÄ±rsal ve BanliyÃ¶",
                        "YÃ¼ksek Gerilim, Orta Gerilim ve AlÃ§ak Gerilim"
                    ],
                    correctAnswer: "Evsel, Ticari ve EndÃ¼striyel"
                },
                {
                    id: 6,
                    question: "TedarikÃ§ilerin faturalandÄ±rmada kullandÄ±ÄŸÄ± 'Billing Demand' (FaturalandÄ±rÄ±lan Talep) genellikle neye gÃ¶re belirlenir?",
                    options: [
                        "MÃ¼ÅŸterinin ay iÃ§indeki ortalama tÃ¼ketimine",
                        "MÃ¼ÅŸterinin ay iÃ§indeki en yÃ¼ksek (peak) talebine",
                        "MÃ¼ÅŸterinin toplam baÄŸlÄ± yÃ¼kÃ¼ne",
                        "MÃ¼ÅŸterinin sÃ¶zleÅŸme gÃ¼cÃ¼ne"
                    ],
                    correctAnswer: "MÃ¼ÅŸterinin ay iÃ§indeki en yÃ¼ksek (peak) talebine"
                },
                {
                    id: 7,
                    question: "TedarikÃ§iler neden 'Peak Demand' (Puant Talep) iÃ§in ek bir bedel (Demand Charge) talep eder?",
                    options: [
                        "MÃ¼ÅŸterileri daha az enerji tÃ¼ketmeye teÅŸvik etmek iÃ§in",
                        "MÃ¼ÅŸterileri zirve (peak) taleplerini 'tÄ±raÅŸlamaya' (shave) teÅŸvik etmek iÃ§in",
                        "Ä°dari maliyetleri karÅŸÄ±lamak iÃ§in",
                        "Devletin koyduÄŸu vergileri yansÄ±tmak iÃ§in"
                    ],
                    correctAnswer: "MÃ¼ÅŸterileri zirve (peak) taleplerini 'tÄ±raÅŸlamaya' (shave) teÅŸvik etmek iÃ§in"
                },
                {
                    id: 8,
                    question: "GÃ¼Ã§ FaktÃ¶rÃ¼ (Power Factor) nasÄ±l tanÄ±mlanÄ±r?",
                    options: [
                        "Reaktif GÃ¼cÃ¼n (kVAR) Toplam GÃ¼ce (kVA) oranÄ±",
                        "GerÃ§ek GÃ¼cÃ¼n (kW) Reaktif GÃ¼ce (kVAR) oranÄ±",
                        "GerÃ§ek GÃ¼cÃ¼n (kW) Toplam GÃ¼ce (kVA) oranÄ±",
                        "Toplam GÃ¼cÃ¼n (kVA) GerÃ§ek GÃ¼ce (kW) oranÄ±"
                    ],
                    correctAnswer: "GerÃ§ek GÃ¼cÃ¼n (kW) Toplam GÃ¼ce (kVA) oranÄ±"
                },
                {
                    id: 9,
                    question: "TedarikÃ§iler, mÃ¼ÅŸterileri dÃ¼ÅŸÃ¼k gÃ¼Ã§ faktÃ¶rÃ¼ (Ã¶rn. < 0.9) iÃ§in neden cezalandÄ±rÄ±r?",
                    options: [
                        "DÃ¼ÅŸÃ¼k PF, ÅŸebekede voltaj dalgalanmalarÄ±na neden olduÄŸu iÃ§in",
                        "DÃ¼ÅŸÃ¼k PF, aynÄ± gerÃ§ek gÃ¼Ã§ (kW) iÃ§in daha yÃ¼ksek toplam gÃ¼Ã§ (kVA) Ã§ekilmesini gerektirdiÄŸi iÃ§in",
                        "DÃ¼ÅŸÃ¼k PF, sayaÃ§larÄ±n yanlÄ±ÅŸ Ã¶lÃ§Ã¼m yapmasÄ±na neden olduÄŸu iÃ§in",
                        "DÃ¼ÅŸÃ¼k PF, sadece endÃ¼striyel tesislerde meydana geldiÄŸi iÃ§in"
                    ],
                    correctAnswer: "DÃ¼ÅŸÃ¼k PF, aynÄ± gerÃ§ek gÃ¼Ã§ (kW) iÃ§in daha yÃ¼ksek toplam gÃ¼Ã§ (kVA) Ã§ekilmesini gerektirdiÄŸi iÃ§in"
                },
                {
                    id: 10,
                    question: "Bir faturada 'Ratchet Clause' (GeÃ§miÅŸe BaÄŸlÄ± Talep Maddesi) bulunmasÄ±nÄ±n anlamÄ± nedir?",
                    options: [
                        "MÃ¼ÅŸterinin faturasÄ±nÄ±n, son 12 ayÄ±n en yÃ¼ksek talebinin belli bir yÃ¼zdesinden az olamayacaÄŸÄ±",
                        "MÃ¼ÅŸterinin faturasÄ±nÄ±n, enflasyon oranÄ±na gÃ¶re otomatik olarak artacaÄŸÄ±",
                        "MÃ¼ÅŸterinin faturasÄ±nÄ±n, tÃ¼kettikÃ§e birim fiyatÄ±nÄ±n dÃ¼ÅŸeceÄŸi (azalan blok)",
                        "MÃ¼ÅŸterinin faturasÄ±nÄ±n, yakÄ±t maliyetlerindeki artÄ±ÅŸlarÄ± yansÄ±tacaÄŸÄ±"
                    ],
                    correctAnswer: "MÃ¼ÅŸterinin faturasÄ±nÄ±n, son 12 ayÄ±n en yÃ¼ksek talebinin belli bir yÃ¼zdesinden az olamayacaÄŸÄ±"
                },
                {
                    id: 11,
                    question: "'YakÄ±t Maliyeti AyarlamasÄ±' (Fuel Cost Adjustment) maddesi ne iÅŸe yarar?",
                    options: [
                        "MÃ¼ÅŸterinin yakÄ±t tasarrufunu Ã¶dÃ¼llendirmek",
                        "TedarikÃ§inin, birincil enerji (kÃ¶mÃ¼r, gaz vb.) fiyatlarÄ±ndaki dalgalanmalarÄ± faturaya yansÄ±tmasÄ±",
                        "UlaÅŸÄ±m sektÃ¶rÃ¼ndeki akaryakÄ±t zamlarÄ±nÄ± dengelemek",
                        "Yenilenebilir enerji kaynaklarÄ±nÄ± teÅŸvik etmek"
                    ],
                    correctAnswer: "TedarikÃ§inin, birincil enerji (kÃ¶mÃ¼r, gaz vb.) fiyatlarÄ±ndaki dalgalanmalarÄ± faturaya yansÄ±tmasÄ±"
                },
                {
                    id: 12,
                    question: "'Ters Blok FiyatlandÄ±rma' (Inverted Block Pricing) tarifesi nasÄ±l Ã§alÄ±ÅŸÄ±r?",
                    options: [
                        "Enerji tÃ¼ketimi arttÄ±kÃ§a birim fiyat artar",
                        "Enerji tÃ¼ketimi arttÄ±kÃ§a birim fiyat azalÄ±r",
                        "GÃ¼nÃ¼n saatlerine gÃ¶re fiyat deÄŸiÅŸir",
                        "Mevsimlere gÃ¶re fiyat deÄŸiÅŸir"
                    ],
                    correctAnswer: "Enerji tÃ¼ketimi arttÄ±kÃ§a birim fiyat artar"
                },
                {
                    id: 13,
                    question: "Elektrik maliyetinin gÃ¼n iÃ§inde 'on-peak' (puant/pahalÄ±) ve 'off-peak' (puant dÄ±ÅŸÄ±/ucuz) olarak deÄŸiÅŸtiÄŸi tarife hangisidir?",
                    options: [
                        "Blok FiyatlandÄ±rma (Block Pricing)",
                        "Zaman EsaslÄ± Tarife (Time-of-Use - TOU)",
                        "GerÃ§ek ZamanlÄ± FiyatlandÄ±rma (RTP)",
                        "DÃ¼z Tarife (Flat Rate)"
                    ],
                    correctAnswer: "Zaman EsaslÄ± Tarife (Time-of-Use - TOU)"
                },
                {
                    id: 14,
                    question: "Elektrik maliyetinin *saatlik olarak* deÄŸiÅŸtiÄŸi ve fiyatlarÄ±n genellikle saatler Ã¶ncesinden duyurulduÄŸu en dinamik tarife hangisidir?",
                    options: [
                        "Blok FiyatlandÄ±rma (Block Pricing)",
                        "Zaman EsaslÄ± Tarife (Time-of-Use - TOU)",
                        "GerÃ§ek ZamanlÄ± FiyatlandÄ±rma (Real-Time-Pricing - RTP)",
                        "Mevsimsel Tarife (Seasonal Rate)"
                    ],
                    correctAnswer: "GerÃ§ek ZamanlÄ± FiyatlandÄ±rma (Real-Time-Pricing - RTP)"
                },
                {
                    id: 15,
                    question: "TÃ¼rkiye'de 'Serbest TÃ¼ketici' (Eligible Consumer) limitlerinin yÄ±llar iÃ§inde dÃ¼ÅŸÃ¼rÃ¼lmesinin en Ã¶nemli sonucu ne olmuÅŸtur?",
                    options: [
                        "Enerji tÃ¼ketiminin azalmasÄ±",
                        "TÃ¼keticilerin tedarikÃ§ilerini serbestÃ§e seÃ§ebilmesi ve rekabetin artmasÄ±",
                        "TÃ¼m faturalarÄ±n devlet tarafÄ±ndan sÃ¼bvanse edilmesi",
                        "Sadece yenilenebilir enerji kullanÄ±mÄ±na izin verilmesi"
                    ],
                    correctAnswer: "TÃ¼keticilerin tedarikÃ§ilerini serbestÃ§e seÃ§ebilmesi ve rekabetin artmasÄ±"
                }
            ],
            en: [
                {
                    id: 1,
                    question: "According to data from 1972-2006, which energy source remained the cheapest?",
                    options: [
                        "Coal",
                        "Natural Gas",
                        "Petroleum Products",
                        "Electricity"
                    ],
                    correctAnswer: "Coal"
                },
                {
                    id: 2,
                    question: "How are 'Distributed Energy Resources' (DER) defined?",
                    options: [
                        "Only energy produced in large dams",
                        "Energy sources connected to distribution grid or customer side of the meter",
                        "Only energy obtained from fossil fuels",
                        "Energy lines transmitted between countries"
                    ],
                    correctAnswer: "Energy sources connected to distribution grid or customer side of the meter"
                },
                {
                    id: 3,
                    question: "Which of the following is an example of a 'New Generation' Distributed Energy Resource (DER)?",
                    options: [
                        "Microturbine",
                        "Gas Turbine",
                        "Solar",
                        "All of them"
                    ],
                    correctAnswer: "Solar"
                },
                {
                    id: 4,
                    question: "What is typically the highest cost category for electricity suppliers when determining tariffs?",
                    options: [
                        "Transmission and distribution systems",
                        "Administrative costs (salaries, insurance)",
                        "Fuel costs",
                        "Generation plant operation"
                    ],
                    correctAnswer: "Generation plant operation"
                },
                {
                    id: 5,
                    question: "What three main customer types do suppliers typically consider when allocating electricity costs?",
                    options: [
                        "Domestic, Commercial, and Industrial",
                        "Government, Private Sector, and Agricultural",
                        "Urban, Rural, and Suburban",
                        "High Voltage, Medium Voltage, and Low Voltage"
                    ],
                    correctAnswer: "Domestic, Commercial, and Industrial"
                },
                {
                    id: 6,
                    question: "How is 'Billing Demand' used by suppliers in billing typically determined?",
                    options: [
                        "Customer's average consumption during the month",
                        "Customer's highest (peak) demand during the month",
                        "Customer's total connected load",
                        "Customer's contract capacity"
                    ],
                    correctAnswer: "Customer's highest (peak) demand during the month"
                },
                {
                    id: 7,
                    question: "Why do suppliers charge an additional fee (Demand Charge) for 'Peak Demand'?",
                    options: [
                        "To encourage customers to consume less energy",
                        "To encourage customers to 'shave' their peak demands",
                        "To cover administrative costs",
                        "To reflect government-imposed taxes"
                    ],
                    correctAnswer: "To encourage customers to 'shave' their peak demands"
                },
                {
                    id: 8,
                    question: "How is Power Factor defined?",
                    options: [
                        "Ratio of Reactive Power (kVAR) to Total Power (kVA)",
                        "Ratio of Real Power (kW) to Reactive Power (kVAR)",
                        "Ratio of Real Power (kW) to Total Power (kVA)",
                        "Ratio of Total Power (kVA) to Real Power (kW)"
                    ],
                    correctAnswer: "Ratio of Real Power (kW) to Total Power (kVA)"
                },
                {
                    id: 9,
                    question: "Why do suppliers penalize customers for low power factor (e.g., < 0.9)?",
                    options: [
                        "Because low PF causes voltage fluctuations in the grid",
                        "Because low PF requires higher total power (kVA) drawn for the same real power (kW)",
                        "Because low PF causes incorrect meter readings",
                        "Because low PF only occurs in industrial facilities"
                    ],
                    correctAnswer: "Because low PF requires higher total power (kVA) drawn for the same real power (kW)"
                },
                {
                    id: 10,
                    question: "What does a 'Ratchet Clause' in a bill mean?",
                    options: [
                        "Customer's bill cannot be less than a percentage of the highest demand in the last 12 months",
                        "Customer's bill will automatically increase according to inflation rate",
                        "Customer's bill will have decreasing unit prices as consumption increases (declining block)",
                        "Customer's bill will reflect increases in fuel costs"
                    ],
                    correctAnswer: "Customer's bill cannot be less than a percentage of the highest demand in the last 12 months"
                },
                {
                    id: 11,
                    question: "What is the purpose of a 'Fuel Cost Adjustment' clause?",
                    options: [
                        "To reward customer's fuel savings",
                        "For the supplier to reflect fluctuations in primary energy (coal, gas, etc.) prices to the bill",
                        "To balance fuel price increases in the transportation sector",
                        "To incentivize renewable energy sources"
                    ],
                    correctAnswer: "For the supplier to reflect fluctuations in primary energy (coal, gas, etc.) prices to the bill"
                },
                {
                    id: 12,
                    question: "How does 'Inverted Block Pricing' tariff work?",
                    options: [
                        "Unit price increases as energy consumption increases",
                        "Unit price decreases as energy consumption increases",
                        "Price varies by time of day",
                        "Price varies by season"
                    ],
                    correctAnswer: "Unit price increases as energy consumption increases"
                },
                {
                    id: 13,
                    question: "Which tariff has electricity costs varying during the day as 'on-peak' (expensive) and 'off-peak' (cheap)?",
                    options: [
                        "Block Pricing",
                        "Time-of-Use (TOU)",
                        "Real-Time-Pricing (RTP)",
                        "Flat Rate"
                    ],
                    correctAnswer: "Time-of-Use (TOU)"
                },
                {
                    id: 14,
                    question: "Which is the most dynamic tariff where electricity costs vary *hourly* and prices are typically announced hours in advance?",
                    options: [
                        "Block Pricing",
                        "Time-of-Use (TOU)",
                        "Real-Time-Pricing (RTP)",
                        "Seasonal Rate"
                    ],
                    correctAnswer: "Real-Time-Pricing (RTP)"
                },
                {
                    id: 15,
                    question: "What has been the most important result of lowering 'Eligible Consumer' limits in Turkey over the years?",
                    options: [
                        "Reduction in energy consumption",
                        "Consumers being able to freely choose their suppliers and increased competition",
                        "All bills being subsidized by the government",
                        "Only renewable energy being allowed for use"
                    ],
                    correctAnswer: "Consumers being able to freely choose their suppliers and increased competition"
                }
            ]
        };

        // Get quiz data based on current language
        function getQuizData() {
            const lang = getLanguage();
            return quizDataBilingual[lang] || quizDataBilingual.tr;
        }

        
        document.addEventListener('DOMContentLoaded', () => {
            const quizContainer = document.getElementById('quiz-container');
            const quizForm = document.getElementById('quiz-form');
            const submitBtn = document.getElementById('submit-btn');
            const resultsContainer = document.getElementById('results-container');

            // 1. SÄ±navÄ± YÃ¼kle
            function loadQuiz() {
                const quizData = getQuizData();
                const lang = getLanguage();
                const questionText = translate('question', 'quiz');
                let quizHTML = '';
                quizData.forEach((q, index) => {
                    // Soru baÅŸlÄ±ÄŸÄ±
                    quizHTML += `
                        <div class="bg-white p-6 rounded-lg shadow-md border border-gray-100" id="question-card-${q.id}">
                            <p class="text-lg font-semibold text-gray-800">
                                ${questionText} ${index + 1}: ${q.question}
                            </p>
                            <div class="space-y-3 mt-4" id="options-container-${q.id}">
                    `;
                    
                    // Cevap seÃ§enekleri (Radyo butonlarÄ±)
                    q.options.forEach(option => {
                        quizHTML += `
                            <label class="block w-full p-3 rounded-lg border border-gray-200 hover:bg-gray-50 transition-colors cursor-pointer">
                                <input type="radio" name="question-${q.id}" value="${option}" class="mr-3 text-blue-800 focus:ring-blue-700">
                                <span class="text-gray-700">${option}</span>
                            </label>
                        `;
                    });

                    quizHTML += `</div></div>`;
                });
                quizContainer.innerHTML = quizHTML;
            }

            // 2. SÄ±navÄ± GÃ¶nder ve SonuÃ§larÄ± GÃ¶ster
            function showResults(event) {
                event.preventDefault(); // Formun sayfayÄ± yenilemesini engelle

                const quizData = getQuizData();
                let score = 0;
                let wrongAnswersHTML = ''; // YanlÄ±ÅŸ cevaplar iÃ§in HTML
                
                // Get translation texts
                const lang = getLanguage();
                const yourAnswerText = translate('yourAnswer', 'quiz');
                const correctAnswerText = translate('correctAnswer', 'quiz');
                const leftBlankText = translate('leftBlank', 'quiz');
                
                quizData.forEach(q => {
                    const card = document.getElementById(`question-card-${q.id}`);
                    const optionsContainer = document.getElementById(`options-container-${q.id}`);
                    const allLabels = optionsContainer.querySelectorAll('label');

                    // KullanÄ±cÄ±nÄ±n seÃ§tiÄŸi cevabÄ± bul
                    const selectedRadio = document.querySelector(`input[name="question-${q.id}"]:checked`);
                    const userAnswer = selectedRadio ? selectedRadio.value : null;
                    const correctAnswer = q.correctAnswer;

                    // TÃ¼m etiketleri sÄ±fÄ±rla (eÄŸer varsa)
                    allLabels.forEach(label => {
                        label.classList.remove('correct-answer-label', 'wrong-answer-label');
                    });

                    if (userAnswer === correctAnswer) {
                        // Cevap doÄŸruysa
                        score++;
                        if (selectedRadio) {
                            selectedRadio.parentElement.classList.add('correct-answer-label');
                        }
                    } else {
                        // Cevap yanlÄ±ÅŸsa
                        if (selectedRadio) {
                            // KullanÄ±cÄ±nÄ±n yanlÄ±ÅŸ seÃ§imini kÄ±rmÄ±zÄ± yap
                            selectedRadio.parentElement.classList.add('wrong-answer-label');
                        }

                        // DoÄŸru cevabÄ± bul ve yeÅŸil yap
                        allLabels.forEach(label => {
                            const input = label.querySelector('input');
                            if (input.value === correctAnswer) {
                                label.classList.add('correct-answer-label');
                            }
                        });

                        // SonuÃ§ listesi iÃ§in HTML hazÄ±rla
                        wrongAnswersHTML += `
                            <div class="p-4 border-b border-gray-200">
                                <p class="font-semibold text-gray-800">${q.question}</p>
                                <p class="text-red-600 mt-2"><strong>${yourAnswerText}:</strong> ${userAnswer || leftBlankText}</p>
                                <p class="text-green-600 mt-1"><strong>${correctAnswerText}:</strong> ${correctAnswer}</p>
                            </div>
                        `;
                    }
                });

                // SonuÃ§larÄ± Ã¼stte gÃ¶ster
                const scorePercentage = Math.round((score / quizData.length) * 100);
                const examResultText = translate('examResult', 'quiz');
                const scoreText = translate('score', 'quiz');
                const correctText = translate('correct', 'quiz');
                const wrongText = translate('wrong', 'quiz');
                const wrongQuestionsTitle = translate('wrongQuestionsTitle', 'quiz');
                const congratulations = translate('congratulations', 'quiz');
                
                resultsContainer.innerHTML = `
                    <h2 class="text-3xl font-bold text-center text-blue-900">${examResultText}</h2>
                    <p class="text-5xl font-bold text-center my-4">${scorePercentage} ${scoreText}</p>
                    <div class="flex justify-center gap-6 text-center text-lg">
                        <span class="font-semibold text-green-600">${correctText}: ${score}</span>
                        <span class="font-semibold text-red-600">${wrongText}: ${quizData.length - score}</span>
                    </div>
                    
                    ${wrongAnswersHTML ? `
                        <hr class="my-8">
                        <h3 class="text-2xl font-bold text-gray-800 mb-4">${wrongQuestionsTitle}</h3>
                        <div class="border border-gray-200 rounded-lg overflow-hidden">
                            ${wrongAnswersHTML}
                        </div>
                    ` : `
                        <hr class="my-8">
                        <p class="text-center text-2xl font-bold text-green-600">${congratulations}</p>
                    `}
                `;

                resultsContainer.classList.remove('hidden');
                submitBtn.classList.add('hidden'); // Butonu gizle
                
                // SonuÃ§lara odaklan
                resultsContainer.scrollIntoView({ behavior: 'smooth' });
            }

            // OlaylarÄ± BaÄŸla
            loadQuiz();
            quizForm.addEventListener('submit', showResults);
        
            // Re-render quiz when language changes
            document.addEventListener('languageChanged', () => {
                loadQuiz();
                updatePageTranslations();
            });
        });
    </script>
</body>
</html>