<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YTÃœ - Enerji YÃ¶netimi SÄ±navÄ± (Karma 2)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.tailwindcss.com?plugins=typography"></script>
    <script src="translations.js"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        /* Ã–zel kaydÄ±rma Ã§ubuÄŸu */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #f1f1f1; }
        ::-webkit-scrollbar-thumb { background: #1e3a8a; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #1e40af; }

        /* SÄ±nav sonuÃ§ stilleri */
        .correct-answer-label {
            background-color: #dcfce7; /* green-100 */
            border: 1px solid #16a34a; /* green-600 */
            color: #15803d; /* green-700 */
            font-weight: bold;
        }
        .wrong-answer-label {
            background-color: #fee2e2; /* red-100 */
            border: 1px solid #dc2626; /* red-600 */
            color: #b91c1c; /* red-700 */
            text-decoration: line-through;
        }
    </style>
</head>
<body class="bg-slate-50 min-h-screen text-slate-800">

    <header class="bg-white border-b border-gray-200 sticky top-0 z-50 shadow-sm">
        <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 h-20 flex justify-between items-center">
            <div class="flex items-center gap-4">
                <div class="w-12 h-12 bg-blue-900 rounded-full flex items-center justify-center text-white font-bold text-xl shadow-md">
                    YTÃœ
                </div>
                <div>
                    <h1 class="text-lg sm:text-xl font-bold text-blue-900 leading-tight" data-translate="siteTitle" data-section="common">AkÄ±llÄ± Evler ve Enerji YÃ¶netimi</h1>
                    <p class="text-xs sm:text-sm text-gray-500"><span data-translate="mixedExam" data-section="quiz">Karma SÄ±nav</span> 2 (<span data-translate="chapters" data-section="quiz">BÃ¶lÃ¼m 1-4</span>)</p>
                </div>
            </div>
            <div class="flex items-center gap-4">
                <button id="lang-switch-btn" class="px-3 py-2 bg-blue-50 hover:bg-blue-100 rounded-lg transition-colors duration-200 border border-blue-200" aria-label="Dil deÄŸiÅŸtir">
                    <span class="text-sm font-semibold">ðŸ‡¬ðŸ‡§ EN</span>
                </button>
                <div class="hidden sm:block text-right">
                    <span class="block text-sm font-semibold text-blue-800" data-translate="prepareForExam" data-section="common">SÄ±nava HazÄ±rlan</span>
                    <span class="block text-xs text-gray-500" data-translate="courseNotesSeries" data-section="common">Ders Ã–zeti Serisi</span>
                </div>
            </div>
        </div>
    </header>

    <main class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-10">
        
        <div class="bg-white rounded-xl shadow-sm border border-gray-100 p-8 mb-10">
            <h2 class="text-2xl font-bold text-gray-800 mb-4"><span data-translate="mixedExam" data-section="quiz">Karma DeÄŸerlendirme SÄ±navÄ±</span> 2 (<span data-translate="chapters" data-section="quiz">BÃ¶lÃ¼m 1-4</span>)</h2>
            <p class="text-gray-600 leading-relaxed" data-translate="examIntro" data-section="quiz">
                Bu sÄ±nav, dersin ilk dÃ¶rt bÃ¶lÃ¼mÃ¼ndeki (PDF 1-4) temel kavramsal bilgilerinizi Ã¶lÃ§mek iÃ§in hazÄ±rlanmÄ±ÅŸtÄ±r. 
                15 adet Ã§oktan seÃ§meli sÃ¶zel soru bulunmaktadÄ±r. BaÅŸarÄ±lar!
            </p>
        </div>

        <form id="quiz-form">
            <div id="quiz-container" class="space-y-10">
                </div>

            <div class="mt-12 text-center">
                <button type="submit" id="submit-btn" class="bg-blue-800 text-white font-bold py-3 px-10 rounded-lg shadow-lg hover:bg-blue-700 transition-colors duration-300" data-translate="finishExam" data-section="quiz">
                    SÄ±navÄ± Bitir
                </button>
            </div>
        </form>

        <div id="results-container" class="hidden bg-white rounded-xl shadow-lg border border-gray-100 p-8 mb-10 mt-12">
            </div>

    </main>

    <footer class="bg-blue-900 text-blue-100 py-8 mt-12">
        <div class="max-w-6xl mx-auto px-4 text-center">
            <p class="text-sm" data-translate="footer.copyright" data-section="common">&copy; 2025 eren0n. TÃ¼m haklarÄ± saklÄ±dÄ±r.</p>
            <p class="text-xs mt-2 opacity-60" data-translate="footer.goodLuck" data-section="common">SÄ±navÄ±nÄ±zda BaÅŸarÄ±lar.</p>
        </div>
    </footer>

    <script>
        // Bilingual Quiz Data - Both Turkish and English
        const quizDataBilingual = {
            tr: [
                {
                    id: 1,
                    question: "(BÃ¶lÃ¼m 2) 'YÃ¼k EÄŸrisi'nin (Load Curve) altÄ±nda kalan alan neyi ifade eder?",
                    options: [
                        "O dÃ¶nemdeki maksimum talebi (kW)",
                        "O dÃ¶nemde Ã¼retilen toplam enerjiyi (kWh)",
                        "Santralin kurulu kapasitesini (MW)",
                        "O dÃ¶nemdeki ortalama yÃ¼kÃ¼ (kW)"
                    ],
                    correctAnswer: "O dÃ¶nemde Ã¼retilen toplam enerjiyi (kWh)"
                },
                {
                    id: 2,
                    question: "(BÃ¶lÃ¼m 4) Ekonomik analizde 'Basit Geri Ã–deme' (SPB) yÃ¶nteminin, 'Ä°skontolu Geri Ã–deme' (DPB) yÃ¶nteminden temel farkÄ± nedir?",
                    options: [
                        "SPB, paranÄ±n zaman deÄŸerini ihmal eder; DPB ise hesaba katar.",
                        "SPB, sadece endÃ¼striyel projelerde kullanÄ±lÄ±r.",
                        "SPB, enflasyonu dikkate alÄ±r, DPB almaz.",
                        "SPB, daha uzun bir geri Ã¶deme sÃ¼resi verir."
                    ],
                    correctAnswer: "SPB, paranÄ±n zaman deÄŸerini ihmal eder; DPB ise hesaba katar."
                },
                {
                    id: 3,
                    question: "(BÃ¶lÃ¼m 1) TÃ¼rkiye'nin 2015 yÄ±lÄ±ndaki kiÅŸi baÅŸÄ± enerji tÃ¼ketiminin (1.6 toe) OECD ortalamasÄ±na (4.2 toe) gÃ¶re durumu, slaytlarda nasÄ±l adlandÄ±rÄ±lmÄ±ÅŸtÄ±r?",
                    options: [
                        "YÃ¼ksek verimlilik (High efficiency)",
                        "DÃ¼ÅŸÃ¼k tÃ¼ketim (Underconsumption)",
                        "HÄ±zlÄ± bÃ¼yÃ¼me (Rapid growth)",
                        "Durgunluk (Stagnation)"
                    ],
                    correctAnswer: "DÃ¼ÅŸÃ¼k tÃ¼ketim (Underconsumption)"
                },
                {
                    id: 4,
                    question: "(BÃ¶lÃ¼m 3) 'Azalan Blok FiyatlandÄ±rma' (Descending Block Rate) tarifesi nasÄ±l Ã§alÄ±ÅŸÄ±r?",
                    options: [
                        "Enerji tÃ¼ketimi arttÄ±kÃ§a birim fiyat artar.",
                        "Enerji tÃ¼ketimi arttÄ±kÃ§a birim fiyat azalÄ±r.",
                        "Fiyatlar gÃ¼nÃ¼n saatine gÃ¶re deÄŸiÅŸir.",
                        "Fiyatlar sadece yaz aylarÄ±nda azalÄ±r."
                    ],
                    correctAnswer: "Enerji tÃ¼ketimi arttÄ±kÃ§a birim fiyat azalÄ±r."
                },
                {
                    id: 5,
                    question: "(BÃ¶lÃ¼m 2) Bir santralin 'Yedek Kapasitesi' (Reserve Capacity) nasÄ±l hesaplanÄ±r?",
                    options: [
                        "Santral Kapasitesi - Ortalama YÃ¼k",
                        "Santral Kapasitesi - Maksimum Talep",
                        "Maksimum Talep - Ortalama YÃ¼k",
                        "Toplam BaÄŸlÄ± YÃ¼k - Maksimum Talep"
                    ],
                    correctAnswer: "Santral Kapasitesi - Maksimum Talep"
                },
                {
                    id: 6,
                    question: "(BÃ¶lÃ¼m 4) N yÄ±l boyunca *her yÄ±l* sabit (A) bir Ã¶deme yaparak bugÃ¼nkÃ¼ (P) bir borcu kapatmak iÃ§in gereken yÄ±llÄ±k (A) miktarÄ±nÄ± bulan faktÃ¶r nedir?",
                    options: [
                        "SPPW (Tek Seferlik BugÃ¼nkÃ¼ DeÄŸer)",
                        "SPCA (Tek Seferlik Gelecek DeÄŸer)",
                        "USPW (Ãœniform Seri BugÃ¼nkÃ¼ DeÄŸer)",
                        "USCR (Ãœniform Seri Sermaye Kurtarma)"
                    ],
                    correctAnswer: "USCR (Ãœniform Seri Sermaye Kurtarma)"
                },
                {
                    id: 7,
                    question: "(BÃ¶lÃ¼m 1) Asit yaÄŸmurlarÄ±na neden olan ve Ã¶zellikle kÃ¶mÃ¼r/fuel oil yakan santrallerden salÄ±nan birincil gaz hangisidir?",
                    options: [
                        "CO2 (Karbondioksit)",
                        "SO2 (KÃ¼kÃ¼rt Dioksit)",
                        "CH4 (Metan)",
                        "N2O (Diazot Monoksit)"
                    ],
                    correctAnswer: "SO2 (KÃ¼kÃ¼rt Dioksit)"
                },
                {
                    id: 8,
                    question: "(BÃ¶lÃ¼m 3) Bir faturada, tedarikÃ§inin mÃ¼ÅŸterinin kendi trafosuna sahip olmasÄ± (customer-owned transformer) durumunda indirim yapmasÄ±, hangi tarife bileÅŸeni kapsamÄ±ndadÄ±r?",
                    options: [
                        "Hizmet Seviyesi (Service Level)",
                        "GÃ¼Ã§ FaktÃ¶rÃ¼ Maddesi (Power Factor Clause)",
                        "Ratchet Clause",
                        "YakÄ±t Maliyeti AyarlamasÄ±"
                    ],
                    correctAnswer: "Hizmet Seviyesi (Service Level)"
                },
                {
                    id: 9,
                    question: "(BÃ¶lÃ¼m 4) Ekonomik analizde 'enflasyon' (&lambda;) kavramÄ± neyi ifade eder?",
                    options: [
                        "ParanÄ±n faiz getirisi oranÄ±nÄ±",
                        "Projenin toplam maliyetini",
                        "Mal ve hizmetlerin fiyatÄ±nÄ±n zamanla artÄ±ÅŸ oranÄ±nÄ±",
                        "Devletin aldÄ±ÄŸÄ± vergi oranÄ±nÄ±"
                    ],
                    correctAnswer: "Mal ve hizmetlerin fiyatÄ±nÄ±n zamanla artÄ±ÅŸ oranÄ±nÄ±"
                },
                {
                    id: 10,
                    question: "(BÃ¶lÃ¼m 2) Sokak aydÄ±nlatmasÄ± ve su temini iÃ§in gereken pompalarÄ±n oluÅŸturduÄŸu yÃ¼k kategorisi hangisidir?",
                    options: [
                        "Evsel YÃ¼k (Domestic load)",
                        "Belediye YÃ¼kÃ¼ (Municipal load)",
                        "Ticari YÃ¼k (Commercial load)",
                        "EndÃ¼striyel YÃ¼k (Industrial load)"
                    ],
                    correctAnswer: "Belediye YÃ¼kÃ¼ (Municipal load)"
                },
                {
                    id: 11,
                    question: "(BÃ¶lÃ¼m 3) AÅŸaÄŸÄ±dakilerden hangisi 'Geleneksel' (Conventional) bir DaÄŸÄ±tÄ±k Enerji KaynaÄŸÄ± (DER) Ã¶rneÄŸidir?",
                    options: [
                        "YakÄ±t HÃ¼cresi (Fuel Cell)",
                        "GÃ¼neÅŸ (Solar)",
                        "Gaz TÃ¼rbini (Gas Turbine)",
                        "RÃ¼zgar (Wind)"
                    ],
                    correctAnswer: "Gaz TÃ¼rbini (Gas Turbine)"
                },
                {
                    id: 12,
                    question: "(BÃ¶lÃ¼m 4) Bir projenin 'Fayda-Maliyet OranÄ±' (BCR) yÃ¶ntemine gÃ¶re ekonomik olarak kabul edilebilir olmasÄ± iÃ§in kriter nedir?",
                    options: [
                        "BCR = 0",
                        "BCR < 1.0",
                        "BCR > 1.0",
                        "BCR = 1.0"
                    ],
                    correctAnswer: "BCR > 1.0"
                },
                {
                    id: 13,
                    question: "(BÃ¶lÃ¼m 1) Enerji yÃ¶netimi sayesinde, yeni teknolojiler ve sÃ¼reÃ§ler kullanarak ÅŸirketlerin maliyet tasarrufunun yanÄ± sÄ±ra elde ettiÄŸi ek fayda nedir?",
                    options: [
                        "Daha fazla hammadde tÃ¼ketimi",
                        "Ãœretkenlik artÄ±ÅŸÄ± (productivity improvement)",
                        "Daha fazla personel istihdamÄ±",
                        "Daha dÃ¼ÅŸÃ¼k vergi Ã¶demesi"
                    ],
                    correctAnswer: "Ãœretkenlik artÄ±ÅŸÄ± (productivity improvement)"
                },
                {
                    id: 14,
                    question: "(BÃ¶lÃ¼m 4) Bir projenin Net BugÃ¼nkÃ¼ DeÄŸerini (NPW) sÄ±fÄ±ra eÅŸitleyen 'iskonto oranÄ±nÄ±' bulan ekonomik analiz yÃ¶ntemi hangisidir?",
                    options: [
                        "Geri DÃ¶nÃ¼ÅŸ OranÄ± (Rate of Return - ROR)",
                        "Geri Ã–deme SÃ¼resi (Payback Period)",
                        "Fayda-Maliyet OranÄ± (BCR)",
                        "YaÅŸam DÃ¶ngÃ¼sÃ¼ Maliyeti (LCC)"
                    ],
                    correctAnswer: "Geri DÃ¶nÃ¼ÅŸ OranÄ± (Rate of Return - ROR)"
                },
                {
                    id: 15,
                    question: "(BÃ¶lÃ¼m 3) Elektrik tarifesini belirlerken dikkate alÄ±nan 'Ä°dari Maliyetler' (Administrative costs) neleri iÃ§erir?",
                    options: [
                        "Sadece santralde kullanÄ±lan yakÄ±tÄ±n maliyetini",
                        "Sadece iletim hatlarÄ±nÄ±n maliyetini",
                        "YÃ¶netim, teknik personel maaÅŸlarÄ±, sigorta ve bakÄ±m maliyetlerini",
                        "Sadece devlet vergilerini"
                    ],
                    correctAnswer: "YÃ¶netim, teknik personel maaÅŸlarÄ±, sigorta ve bakÄ±m maliyetlerini"
                }
            ],
            en: [
                {
                    id: 1,
                    question: "(Chapter 2) What does the area under the 'Load Curve' represent?",
                    options: [
                        "Maximum demand in that period (kW)",
                        "Total energy produced in that period (kWh)",
                        "Installed capacity of the power plant (MW)",
                        "Average load in that period (kW)"
                    ],
                    correctAnswer: "Total energy produced in that period (kWh)"
                },
                {
                    id: 2,
                    question: "(Chapter 4) What is the fundamental difference between 'Simple Payback' (SPB) and 'Discounted Payback' (DPB) methods in economic analysis?",
                    options: [
                        "SPB neglects the time value of money; DPB takes it into account.",
                        "SPB is only used for industrial projects.",
                        "SPB considers inflation, DPB does not.",
                        "SPB gives a longer payback period."
                    ],
                    correctAnswer: "SPB neglects the time value of money; DPB takes it into account."
                },
                {
                    id: 3,
                    question: "(Chapter 1) How is Turkey's per capita energy consumption in 2015 (1.6 toe) compared to the OECD average (4.2 toe) described in the slides?",
                    options: [
                        "High efficiency",
                        "Underconsumption",
                        "Rapid growth",
                        "Stagnation"
                    ],
                    correctAnswer: "Underconsumption"
                },
                {
                    id: 4,
                    question: "(Chapter 3) How does 'Descending Block Rate' pricing work?",
                    options: [
                        "As energy consumption increases, unit price increases.",
                        "As energy consumption increases, unit price decreases.",
                        "Prices change according to time of day.",
                        "Prices decrease only in summer months."
                    ],
                    correctAnswer: "As energy consumption increases, unit price decreases."
                },
                {
                    id: 5,
                    question: "(Chapter 2) How is a power plant's 'Reserve Capacity' calculated?",
                    options: [
                        "Plant Capacity - Average Load",
                        "Plant Capacity - Maximum Demand",
                        "Maximum Demand - Average Load",
                        "Total Connected Load - Maximum Demand"
                    ],
                    correctAnswer: "Plant Capacity - Maximum Demand"
                },
                {
                    id: 6,
                    question: "(Chapter 4) What factor finds the annual payment amount (A) required to pay off a present debt (P) by making a constant payment (A) *every year* for N years?",
                    options: [
                        "SPPW (Single Payment Present Worth)",
                        "SPCA (Single Payment Compound Amount)",
                        "USPW (Uniform Series Present Worth)",
                        "USCR (Uniform Series Capital Recovery)"
                    ],
                    correctAnswer: "USCR (Uniform Series Capital Recovery)"
                },
                {
                    id: 7,
                    question: "(Chapter 1) What is the primary gas that causes acid rain and is released especially from coal/fuel oil burning power plants?",
                    options: [
                        "CO2 (Carbon Dioxide)",
                        "SO2 (Sulfur Dioxide)",
                        "CH4 (Methane)",
                        "N2O (Nitrous Oxide)"
                    ],
                    correctAnswer: "SO2 (Sulfur Dioxide)"
                },
                {
                    id: 8,
                    question: "(Chapter 3) When a supplier offers a discount if the customer owns their own transformer (customer-owned transformer), which tariff component does this fall under?",
                    options: [
                        "Service Level",
                        "Power Factor Clause",
                        "Ratchet Clause",
                        "Fuel Cost Adjustment"
                    ],
                    correctAnswer: "Service Level"
                },
                {
                    id: 9,
                    question: "(Chapter 4) What does the concept of 'inflation' (Î») represent in economic analysis?",
                    options: [
                        "The interest return rate of money",
                        "The total cost of the project",
                        "The rate of increase in prices of goods and services over time",
                        "The tax rate charged by the government"
                    ],
                    correctAnswer: "The rate of increase in prices of goods and services over time"
                },
                {
                    id: 10,
                    question: "(Chapter 2) What is the load category for street lighting and pumps required for water supply?",
                    options: [
                        "Domestic load",
                        "Municipal load",
                        "Commercial load",
                        "Industrial load"
                    ],
                    correctAnswer: "Municipal load"
                },
                {
                    id: 11,
                    question: "(Chapter 3) Which of the following is an example of a 'Conventional' Distributed Energy Resource (DER)?",
                    options: [
                        "Fuel Cell",
                        "Solar",
                        "Gas Turbine",
                        "Wind"
                    ],
                    correctAnswer: "Gas Turbine"
                },
                {
                    id: 12,
                    question: "(Chapter 4) What is the criterion for a project to be economically acceptable according to the 'Benefit-Cost Ratio' (BCR) method?",
                    options: [
                        "BCR = 0",
                        "BCR < 1.0",
                        "BCR > 1.0",
                        "BCR = 1.0"
                    ],
                    correctAnswer: "BCR > 1.0"
                },
                {
                    id: 13,
                    question: "(Chapter 1) What is the additional benefit companies gain through energy management, besides cost savings, by using new technologies and processes?",
                    options: [
                        "More raw material consumption",
                        "Productivity improvement",
                        "More personnel employment",
                        "Lower tax payment"
                    ],
                    correctAnswer: "Productivity improvement"
                },
                {
                    id: 14,
                    question: "(Chapter 4) Which economic analysis method finds the 'discount rate' that makes the Net Present Worth (NPW) of a project equal to zero?",
                    options: [
                        "Rate of Return (ROR)",
                        "Payback Period",
                        "Benefit-Cost Ratio (BCR)",
                        "Life Cycle Cost (LCC)"
                    ],
                    correctAnswer: "Rate of Return (ROR)"
                },
                {
                    id: 15,
                    question: "(Chapter 3) What do 'Administrative costs' considered when determining electricity tariffs include?",
                    options: [
                        "Only the cost of fuel used in the power plant",
                        "Only the cost of transmission lines",
                        "Management, technical staff salaries, insurance, and maintenance costs",
                        "Only government taxes"
                    ],
                    correctAnswer: "Management, technical staff salaries, insurance, and maintenance costs"
                }
            ]
        };

        // Get quiz data based on current language
        function getQuizData() {
            const lang = getLanguage();
            return quizDataBilingual[lang] || quizDataBilingual.tr;
        }

        document.addEventListener('DOMContentLoaded', () => {
            const quizContainer = document.getElementById('quiz-container');
            const quizForm = document.getElementById('quiz-form');
            const submitBtn = document.getElementById('submit-btn');
            const resultsContainer = document.getElementById('results-container');

            // 1. SÄ±navÄ± YÃ¼kle
            function loadQuiz() {
                const quizData = getQuizData(); // Get language-specific quiz data
                const lang = getLanguage();
                const questionText = translate('question', 'quiz');
                let quizHTML = '';
                quizData.forEach((q, index) => {
                    // Soru baÅŸlÄ±ÄŸÄ±
                    quizHTML += `
                        <div class="bg-white p-6 rounded-lg shadow-md border border-gray-100" id="question-card-${q.id}">
                            <p class="text-lg font-semibold text-gray-800">
                                ${questionText} ${index + 1}: ${q.question}
                            </p>
                            <div class="space-y-3 mt-4" id="options-container-${q.id}">
                    `;
                    
                    // Cevap seÃ§enekleri (Radyo butonlarÄ±)
                    q.options.forEach(option => {
                        quizHTML += `
                            <label class="block w-full p-3 rounded-lg border border-gray-200 hover:bg-gray-50 transition-colors cursor-pointer">
                                <input type="radio" name="question-${q.id}" value="${option}" class="mr-3 text-blue-800 focus:ring-blue-700">
                                <span class="text-gray-700">${option}</span>
                            </label>
                        `;
                    });

                    quizHTML += `</div></div>`;
                });
                quizContainer.innerHTML = quizHTML;
            }

            // 2. SÄ±navÄ± GÃ¶nder ve SonuÃ§larÄ± GÃ¶ster
            function showResults(event) {
                event.preventDefault(); // Formun sayfayÄ± yenilemesini engelle

                const quizData = getQuizData(); // Get language-specific quiz data
                
                // Get translation texts first
                const lang = getLanguage();
                const yourAnswerText = translate('yourAnswer', 'quiz');
                const correctAnswerText = translate('correctAnswer', 'quiz');
                const leftBlankText = translate('leftBlank', 'quiz');
                
                let score = 0;
                let wrongAnswersHTML = ''; // YanlÄ±ÅŸ cevaplar iÃ§in HTML
                
                quizData.forEach(q => {
                    const card = document.getElementById(`question-card-${q.id}`);
                    const optionsContainer = document.getElementById(`options-container-${q.id}`);
                    const allLabels = optionsContainer.querySelectorAll('label');

                    // KullanÄ±cÄ±nÄ±n seÃ§tiÄŸi cevabÄ± bul
                    const selectedRadio = document.querySelector(`input[name="question-${q.id}"]:checked`);
                    const userAnswer = selectedRadio ? selectedRadio.value : null;
                    const correctAnswer = q.correctAnswer;

                    // TÃ¼m etiketleri sÄ±fÄ±rla (eÄŸer varsa)
                    allLabels.forEach(label => {
                        label.classList.remove('correct-answer-label', 'wrong-answer-label');
                    });

                    if (userAnswer === correctAnswer) {
                        // Cevap doÄŸruysa
                        score++;
                        if (selectedRadio) {
                            selectedRadio.parentElement.classList.add('correct-answer-label');
                        }
                    } else {
                        // Cevap yanlÄ±ÅŸsa
                        if (selectedRadio) {
                            // KullanÄ±cÄ±nÄ±n yanlÄ±ÅŸ seÃ§imini kÄ±rmÄ±zÄ± yap
                            selectedRadio.parentElement.classList.add('wrong-answer-label');
                        }

                        // DoÄŸru cevabÄ± bul ve yeÅŸil yap
                        allLabels.forEach(label => {
                            const input = label.querySelector('input');
                            if (input.value === correctAnswer) {
                                label.classList.add('correct-answer-label');
                            }
                        });

                        // SonuÃ§ listesi iÃ§in HTML hazÄ±rla
                        wrongAnswersHTML += `
                            <div class="p-4 border-b border-gray-200">
                                <p class="font-semibold text-gray-800">${q.question}</p>
                                <p class="text-red-600 mt-2"><strong>${yourAnswerText}:</strong> ${userAnswer || leftBlankText}</p>
                                <p class="text-green-600 mt-1"><strong>${correctAnswerText}:</strong> ${correctAnswer}</p>
                            </div>
                        `;
                    }
                });

                // SonuÃ§larÄ± Ã¼stte gÃ¶ster
                const scorePercentage = Math.round((score / quizData.length) * 100);
                const examResultText = translate('examResult', 'quiz');
                const scoreText = translate('score', 'quiz');
                const correctText = translate('correct', 'quiz');
                const wrongText = translate('wrong', 'quiz');
                const wrongQuestionsTitle = translate('wrongQuestionsTitle', 'quiz');
                const congratulations = translate('congratulations', 'quiz');
                
                resultsContainer.innerHTML = `
                    <h2 class="text-3xl font-bold text-center text-blue-900">${examResultText}</h2>
                    <p class="text-5xl font-bold text-center my-4">${scorePercentage} ${scoreText}</p>
                    <div class="flex justify-center gap-6 text-center text-lg">
                        <span class="font-semibold text-green-600">${correctText}: ${score}</span>
                        <span class="font-semibold text-red-600">${wrongText}: ${quizData.length - score}</span>
                    </div>
                    
                    ${wrongAnswersHTML ? `
                        <hr class="my-8">
                        <h3 class="text-2xl font-bold text-gray-800 mb-4">${wrongQuestionsTitle}</h3>
                        <div class="border border-gray-200 rounded-lg overflow-hidden">
                            ${wrongAnswersHTML}
                        </div>
                    ` : `
                        <hr class="my-8">
                        <p class="text-center text-2xl font-bold text-green-600">${congratulations}</p>
                    `}
                `;

                resultsContainer.classList.remove('hidden');
                submitBtn.classList.add('hidden'); // Butonu gizle
                
                // SonuÃ§lara odaklan
                resultsContainer.scrollIntoView({ behavior: 'smooth' });
            }

            // OlaylarÄ± BaÄŸla
            loadQuiz();
            quizForm.addEventListener('submit', showResults);
        
            // Re-render quiz when language changes
            document.addEventListener('languageChanged', () => {
                loadQuiz();
                updatePageTranslations();
            });
        });
    </script>
</body>
</html>